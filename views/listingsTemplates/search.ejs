<% layout("/layouts/boilerplate") %>

<body>
    <% if (query) { %>
        <h3 class="mt-3">Searched results for "<%= query %>"</h3>
        <div class="listings">
            <% if (filteredListings.length > 0) { %>
                <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
                    <% for (let listing of filteredListings) { %>
                        <a href="/listings/<%= listing._id %>" class="listing-link"> 
                            <div class="card column listingCard">
                                <img 
                                    src="<%= listing.image.url %>" 
                                    class="card-img-top" 
                                    alt="listing_image" 
                                    >
                                <div class="card-img-overlay"></div>
                                <div class="card-body">
                                  <p class="card-text">
                                    <b><%= listing.title %></b> <br>
                                    &#8377;<%= listing.price.toLocaleString("en-In") %> / night
                                    <i class="taxInfo"> &nbsp;+ 18% GST</i>
                                </p>
                                </div>
                            </div>
                        </a>
                     <% } %>
            <% } else { %>
                <p>No listing found for your search.</p>
            <% } %>
        </div>
    <% } %>

    </div>
</body>